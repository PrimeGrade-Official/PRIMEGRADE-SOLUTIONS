    <script>
        var myServices = [];
        var myLinks = [];

        function showToast(text) {
            var x = document.getElementById("toast");
            x.textContent = text;
            x.className = "show";
            setTimeout(function(){ x.className = x.className.replace("show", ""); }, 3000);
        }

        function addNewServiceItem() {
            var dropdown = document.getElementById("service-dropdown");
            var svcName = dropdown.value;
            
            // Prevent duplicates
            var isDuplicate = false;
            for(var i=0; i < myServices.length; i++) { 
                if(myServices[i] === svcName) isDuplicate = true; 
            }
            
            if(isDuplicate) { 
                showToast("âš ï¸ Service already added!"); 
                return; 
            }
            
            myServices.push(svcName);
            updateServiceDisplay();
            checkHwVisibility();
            showToast("âœ… Service Added!");
        }

        function removeServiceItem(index) {
            myServices.splice(index, 1);
            updateServiceDisplay();
            checkHwVisibility();
        }

        function updateServiceDisplay() {
            var container = document.getElementById("selected-services-display");
            var htmlBuilder = "";
            for(var i=0; i < myServices.length; i++) {
                var num = i + 1;
                htmlBuilder += '<div class="selected-svc-item"><div><span class="svc-number">' + num + '</span>' + myServices[i] + '</div><span class="delete-x" onclick="removeServiceItem(' + i + ')">Ã—</span></div>';
            }
            container.innerHTML = htmlBuilder;
        }

        function checkHwVisibility() {
            var box = document.getElementById("platform-options");
            var found = false;
            for(var i=0; i < myServices.length; i++) { 
                if(myServices[i].indexOf("Homework Q&A") !== -1) found = true; 
            }
            box.style.display = found ? "block" : "none";
        }

        function saveLinkItem() {
            var plat = document.getElementById("platform-select").value;
            var urlVal = document.getElementById("link-input-field").value;
            if(urlVal === "") { showToast("âš ï¸ Paste a link first!"); return; }
            
            var item = { p: plat, u: urlVal };
            myLinks.push(item);
            updateLinkDisplay();
            document.getElementById("link-input-field").value = "";
            showToast("ðŸ”— Link Saved!");
        }

        function removeLinkItem(index) {
            myLinks.splice(index, 1);
            updateLinkDisplay();
        }

        // --- THIS WAS CUT OFF IN YOUR CODE, HERE IS THE FIX ---
        function updateLinkDisplay() {
            var container = document.getElementById("saved-links-list");
            var htmlBuilder = "";
            for(var i=0; i < myLinks.length; i++) {
                htmlBuilder += '<div class="saved-item"><div><strong>' + myLinks[i].p + ':</strong> ' + myLinks[i].u + '</div><span class="delete-x" onclick="removeLinkItem(' + i + ')">Ã—</span></div>';
            }
            container.innerHTML = htmlBuilder;
        }

        // --- THIS IS THE MISSING FUNCTION TO MAKE WHATSAPP WORK ---
        function finalizeInquiry() {
            // 1. Validation: Ensure they selected a service
            if (myServices.length === 0) {
                showToast("âš ï¸ Please add at least one Service!");
                return;
            }

            // 2. Get Form Data
            var urgency = document.getElementById("urgency").value;
            var topic = document.getElementById("topic").value;
            var hasFiles = document.getElementById("has-files").checked ? "YES (Will attach in chat)" : "NO";

            // 3. Construct Message
            var message = "*NEW ORDER INQUIRY*\n";
            message += "----------------------------\n";
            message += "*Services:* " + myServices.join(", ") + "\n";
            message += "*Urgency:* " + urgency + "\n";
            message += "*Topic/Module:* " + (topic ? topic : "Not Specified") + "\n";
            message += "*Has Files:* " + hasFiles + "\n";

            // Add links if Homework Q&A was selected
            if (myLinks.length > 0) {
                message += "\n*--- LINKS ---*\n";
                for(var i=0; i < myLinks.length; i++) {
                    message += myLinks[i].p + ": " + myLinks[i].u + "\n";
                }
            }

            message += "----------------------------\n";
            message += "Please check my details and provide a quote.";

            // 4. Encode and Open WhatsApp
            // Using the number found in your HTML: 260750621616
            var whatsappURL = "https://wa.me/260750621616?text=" + encodeURIComponent(message);
            window.open(whatsappURL, '_blank');
        }
    </script>
</body>
</html>
